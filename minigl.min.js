function Vec3(){var e,l,t,n,r,s,i=this;return 3===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2]):1===arguments.length?arguments[0].hasOwnProperty("el")?(this.x=arguments[0].el[12],this.y=arguments[0].el[13],this.z=arguments[0].el[14]):(this.x=arguments[0].x,this.y=arguments[0].y,this.z=arguments[0].z):(this.x=0,this.y=0,this.z=0),this.set=function(e,l,t){return i.x=e,i.y=l,i.z=t,i},this.copy=function(e){return i.x=e.x,i.y=e.y,i.z=e.z,i},this.length=function(){return Math.sqrt(i.x*i.x+i.y*i.y+i.z*i.z)},this.multiplyScalar=function(e){return i.x*=e,i.y*=e,i.z*=e,i},this.sub=function(e){return i.x-=e.x,i.y-=e.y,i.z-=e.z,i},this.add=function(e){return i.x+=e.x,i.y+=e.y,i.z+=e.z,i},this.negate=function(){return i.x=-i.x,i.y=-i.y,i.z=-i.z,i},this.normalize=function(){return i.multiplyScalar(1/i.length()),i},this.cross=function(u){return e=i.x,l=i.y,t=i.z,n=u.x,r=u.y,s=u.z,i.x=l*s-t*r,i.y=t*n-e*s,i.z=e*r-l*n,i},this}function Mat4(){var e,l,t,n,r,s,i,u,a,h,o,c,z,y,x,m,f,g,p,M,v,d,w,S,V,P,b,k,q,A,C,I,O,X,Y,Z,j,B,D=this;return this.reset=function(){D.el=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},this.setPosition=function(e,l,t){return D.el[12]=e,D.el[13]=l,D.el[14]=t,D},this.multiply=function(O){return f=D.el[0],e=O[0],g=D.el[1],l=O[1],p=D.el[2],t=O[2],M=D.el[3],n=O[3],v=D.el[4],r=O[4],d=D.el[5],s=O[5],w=D.el[6],i=O[6],S=D.el[7],u=O[7],V=D.el[8],a=O[8],P=D.el[9],h=O[9],b=D.el[10],o=O[10],k=D.el[11],c=O[11],q=D.el[12],z=O[12],A=D.el[13],y=O[13],C=D.el[14],x=O[14],I=D.el[15],m=O[15],D.el=[f*e+g*r+p*a+M*z,f*l+g*s+p*h+M*y,f*t+g*i+p*o+M*x,f*n+g*u+p*c+M*m,v*e+d*r+w*a+S*z,v*l+d*s+w*h+S*y,v*t+d*i+w*o+S*x,v*n+d*u+w*c+S*m,V*e+P*r+b*a+k*z,V*l+P*s+b*h+k*y,V*t+P*i+b*o+k*x,V*n+P*u+b*c+k*m,q*e+A*r+C*a+I*z,q*l+A*s+C*h+I*y,q*t+A*i+C*o+I*x,q*n+A*u+C*c+I*m],D},this.rotateX=function(e){return O=Math.cos(e),X=Math.sin(e),g=D.el[1],d=D.el[5],P=D.el[9],A=D.el[13],D.el[1]=D.el[1]*O-D.el[2]*X,D.el[2]=g*X+D.el[2]*O,D.el[5]=D.el[5]*O-D.el[6]*X,D.el[6]=d*X+D.el[6]*O,D.el[9]=D.el[9]*O-D.el[10]*X,D.el[10]=P*X+D.el[10]*O,D.el[13]=D.el[13]*O-D.el[14]*X,D.el[14]=A*X+D.el[14]*O,D},this.rotateY=function(e){return O=Math.cos(e),X=Math.sin(e),f=D.el[0],v=D.el[4],V=D.el[8],q=D.el[12],D.el[0]=D.el[2]*X+D.el[0]*O,D.el[2]=D.el[2]*O-f*X,D.el[4]=D.el[6]*X+D.el[4]*O,D.el[6]=D.el[6]*O-v*X,D.el[8]=D.el[10]*X+D.el[8]*O,D.el[10]=D.el[10]*O-V*X,D.el[12]=D.el[14]*X+D.el[12]*O,D.el[14]=D.el[14]*O-q*X,D},this.rotateZ=function(e){return O=Math.cos(e),X=Math.sin(e),f=D.el[0],v=D.el[4],V=D.el[8],q=D.el[12],D.el[0]=D.el[0]*O-D.el[1]*X,D.el[1]=f*X+D.el[1]*O,D.el[4]=D.el[4]*O-D.el[5]*X,D.el[5]=v*X+D.el[5]*O,D.el[8]=D.el[8]*O-D.el[9]*X,D.el[9]=V*X+D.el[9]*O,D.el[12]=D.el[12]*O-D.el[13]*X,D.el[13]=q*X+D.el[13]*O,D},this.setScale=function(e,l,t){return D.el[0]*=e,D.el[1]*=l,D.el[2]*=t,D.el[4]*=e,D.el[5]*=l,D.el[6]*=t,D.el[8]*=e,D.el[9]*=l,D.el[10]*=t,D.el[12]*=e,D.el[13]*=l,D.el[14]*=t,D},this.copy=function(e){for(var l=0;16>l;l++)D.el[l]=e.el[l];return D},this.multiplyScalar=function(e){for(var l=0;16>l;l++)D.el[l]*=e;return D},this.inverse=function(){var e=D.el[0],l=D.el[1],t=D.el[2],n=D.el[3],r=D.el[4],s=D.el[5],i=D.el[6],u=D.el[7],a=D.el[8],h=D.el[9],o=D.el[10],c=D.el[11],z=D.el[12],y=D.el[13],x=D.el[14],m=D.el[15],f=h*x*u-y*o*u+y*i*c-s*x*c-h*i*m+s*o*m,g=z*o*u-a*x*u-z*i*c+r*x*c+a*i*m-r*o*m,p=a*y*u-z*h*u+z*s*c-r*y*c-a*s*m+r*h*m,M=z*h*i-a*y*i-z*s*o+r*y*o+a*s*x-r*h*x,v=e*f+l*g+t*p+n*M;return 0!==v?(D.el[0]=f,D.el[1]=y*o*n-h*x*n-y*t*c+l*x*c+h*t*m-l*o*m,D.el[2]=s*x*n-y*i*n+y*t*u-l*x*u-s*t*m+l*i*m,D.el[3]=h*i*n-s*o*n-h*t*u+l*o*u+s*t*c-l*i*c,D.el[4]=g,D.el[5]=a*x*n-z*o*n+z*t*c-e*x*c-a*t*m+e*o*m,D.el[6]=z*i*n-r*x*n-z*t*u+e*x*u+r*t*m-e*i*m,D.el[7]=r*o*n-a*i*n+a*t*u-e*o*u-r*t*c+e*i*c,D.el[8]=p,D.el[9]=z*h*n-a*y*n-z*l*c+e*y*c+a*l*m-e*h*m,D.el[10]=r*y*n-z*s*n+z*l*u-e*y*u-r*l*m+e*s*m,D.el[11]=a*s*n-r*h*n-a*l*u+e*h*u+r*l*c-e*s*c,D.el[12]=M,D.el[13]=a*y*t-z*h*t+z*l*o-e*y*o-a*l*x+e*h*x,D.el[14]=z*s*t-r*y*t-z*l*i+e*y*i+r*l*x-e*s*x,D.el[15]=r*h*t-a*s*t+a*l*i-e*h*i-r*l*o+e*s*o,D.multiplyScalar(1/v)):console.warn("Mat4 : Cannot inverse matrix, determinant is null"),D},this.perspective=function(e,l,t,n){return Y=Math.tan(Math.PI*e/360),D.el[0]=.5/Y,D.el[5]=.5*l/Y,D.el[10]=-(n+t)/(n-t),D.el[11]=-1,D.el[14]=-2*n*t/(n-t),D.el[15]=0,D},this.lookAt=function(){return"undefined"==typeof Z&&(Z={x:new Vec3,y:new Vec3,z:new Vec3}),3===arguments.length?j={x:arguments[0],y:arguments[1],z:arguments[2]}:1===arguments.length&&(j=arguments[0]),Z.z.set(D.el[12],D.el[13],D.el[14]).sub(j).normalize(),0===Z.z.length()&&(Z.z.z=1),Z.x.set(0,1,0).cross(Z.z).normalize(),0===Z.x.length()&&(Z.z.x+=1e-4,Z.x.cross(Z.z).normalize()),Z.y.copy(Z.z).cross(Z.x),D.el[0]=Z.x.x,D.el[4]=Z.y.x,D.el[8]=Z.z.x,D.el[1]=Z.x.y,D.el[5]=Z.y.y,D.el[9]=Z.z.y,D.el[2]=Z.x.z,D.el[6]=Z.y.z,D.el[10]=Z.z.z,D},this.transpose=function(){return B=D.el,D.el[1]=B[4],D.el[2]=B[8],D.el[3]=B[12],D.el[4]=B[1],D.el[6]=B[9],D.el[7]=B[13],D.el[8]=B[2],D.el[9]=B[6],D.el[11]=B[14],D.el[12]=B[3],D.el[13]=B[7],D.el[14]=B[11],B=void 0,D},this.reset(),this}